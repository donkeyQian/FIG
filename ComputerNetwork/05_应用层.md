## 概述
>解决通过应用进程的交互来实现特定网络应用的问题

* 应用层是计算机网络体系结构的最顶层，是设计和建立计算机网络的最终目的，也是计算机网络中发展最快的部分。
    * 早期基于文本的应用（电子邮件、远程登录、文件传输、新闻组）
    * 20世纪90年代将因特网带入千家万户的万维网WWW
    * 当今流行的即时通信、P2P文件共享及各种音视频应用
    * 计算设备的小型化和“无处不在”，宽带住宅接入和无线接入的日益普及和迅速发展，为未来更多的新型应用提供了广阔的舞台。

* 应用层的学习将聚焦于一些网络应用的原理、协议和实现方面的知识。

## 客户/服务器方式（C/S）和对等方式（P2P）

* 网络应用程序运行在处于网络边缘的不同的端系统上，通过彼此间的通信来共同完成某项任务。
* 开发一种新的网络应用首先要考虑的问题就是`网络应用程序在各种端系统上的组织方式和它们之间的关系`。目前流行的主要有以下两种：
    * `客户/服务器`（Client/Server，C/S）方式
    * `对等`（Peer-to-Peer，P2P）方式

### 客户/服务器方式

* 客户和服务器是指通信中所涉及的两个应用进程。
* 客户/服务器方式所描述的是进程之间服务和被服务的关系。
* `客户是服务请求方，服务器是服务提供方`。
* `服务器总是处于运行状态`，并等待客户的服务请求。服务器`具有固定端口号`（例如HTTP服务器的默认端口号为80），而运行服务器的`主机也具有固定的IP地址`。

![](../image/Pasted%20image%2020221206135843.png)

* C/S方式是因特网上传统的、同时也是最成熟的方式，很多我们熟悉的网络应用采用的都是C/S方式。包括万维网WWW、电子邮件、文件传输FTP等。
* 基于C/S方式的应用服务通常是`服务集中型`的，即应用服务集中在网络中比客户计算机少得多的服务器计算机上。
    * 由于一台服务器计算机要为多个客户机提供服务，在C/S应用中，常会出现`服务器计算机跟不上众多客户机请求`的情况。
    * 为此，在C/S应用中，常用`计算机群集`（或服务器场）构建一个强大的`虚拟服务器`。

### 对等方式

* 在P2P方式中，`没有固定的服务请求者和服务提供者`，分布在网络边缘各端系统中的应用进程是对等的，被称为`对等方`。`对等方相互之间直接通信`，每个对等方既是服务的请求者，又是服务的提供者。
* 目前，在因特网上流行的P2P应用主要包括P2P文件共享、即时通信、P2P流媒体、分布式存储等。
* 基于P2P的应用是`服务分散型`的，因为服务不是集中在少数几个服务器计算机中，而是分散在大量对等计算机中，这些计算机并不为服务提供商所有，而是为个人控制的桌面计算机和笔记本电脑，它们通常位于住宅、校园和办公室中。

![](../image/Pasted%20image%2020221206140308.png)


* P2P方式的最突出特性之一就是它的`可扩展性`。因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者，`系统性能不会因规模的增大而降低`。
* P2P方式`具有成本上的优势`，因为它通常不需要庞大的服务器设施和服务器带宽。为了降低成本，服务提供商对于将P2P方式用于应用的兴趣越来越大。

## 动态主机配置协议DHCP
>DHCP 服务可以让网络中的主机自动获取网络配置信息（IP地址、子网掩码、默认网关、DNS服务器等）

![](../image/Pasted%20image%2020221206140820.png)

### DHCP 工作过程

1. ***客户机寻找 DHCP 服务器***
    *  DHCP `客户机`上线，通过 UDP 68号端口向网络中`广播发送 DCHP DISCOVER` （DHCP 发现报文）
        *  发现报文信息：
            * 源IP地址：0.0.0.0
            * 目的IP地址：255.255.255.255
            * 事务ID：用来标识本次 DHCP 请求
            * DHCP 客户端的 MAC 地址
        * 为什么发送广播报文？
            * 因为DHCP 客户机并不知道网络中的哪台主机是DHCP 服务器
2. ***服务器提供 IP地址租约***
    1. DHCP 服务器收到 DHCP DISCOVER 报文后，会先在DHCP 数据库中`查找`是否有关于`DHCP 客户机 MAC 地址`的配置信息
        1. 如果有，将该配置封装成 `DHCP OFFER`（DCHP 提供报文）
        2. 如果没有，则根据`默认配置`构造出 DHCP OFFER 
    2. DHCP 服务器广播发送DHCP OFFER
        *  DHCP OFFER 报文信息：
            * 事务ID
            * 配置信息：IP 地址、子网掩码、地址租期、默认网关、DNS服务器
    * DCHP 客户机如何分辨广播的 DHCP OFFER 是不是发送给自己的?
        * 客户机会监听UDP 68号端口，在收到 DHCP OFFER时，`只有事务ID和自己请求的事务ID一致才会保留该报文`。
    * 为什么服务器要查询数据库？
        * 请求地址的客户机有可能是异常重启之后的主机，这部分主机的租约还没有到期，不需要重新分配网络信息
    *  `服务端如何保证发送的IP 地址未被其他主机占用`？
        * 服务端会提前使用 [ARP协议](02_数据链路层.md#ARP协议) 确保所提供的IP地址没有被其他主机占用
3. ***客户机接受 IP 地址租约***
    1. DHCP 客户机收到 DHCP OFFER 后，会广播发送一个 `DHCP REQUEST`（DHCP 请求）报文
        * DHCP 请求报文信息：
            * 事务ID
            * DHCP 客户端的 MAC地址
            * 接受的租约中的 IP地址
            * 提供此租约的DHCP 服务器的IP地址
4. ***确认 IP 地址租约***
    1. 服务器收到 DHCP 请求报文后，会广播回复一个 DHCP ACK（DHCP 确认）报文
    2. 客户机在收到确认信息之后，还会再通过 [ARP协议](02_数据链路层.md#ARP协议) 协议`检测分配到的 IP 地址是否已被网络中的其他主机占用`
        1. 如果被占用，给DHCP 服务器发送 `DHCP DECLINE` （DHCP 撤销）报文撤销IP 地址租约，并重新发送 DHCP DISCOVER 报文请求 IP 地址
        2. 若未被占用，就可以使用租约中的 IP 地址了
5. ***续约与弃租*** ^9136b9
    1. 续约
        1. 客户机使用的IP 地址`租期时间超过 1/2`时，客户机会向服务器发送 DCHP REQUEST 报文`请求续约`。
            1. 若服务器答应`续约`，则向客户机发送`DHCP ACK` 确认报文确认续约，客户机得到新的租用期 ^1db697
            2. 若服务器`拒绝续约`，则向客户机发送 `DHCP NACK` 拒绝报文拒绝续约，客户机必须立即停止使用租用的 IP 地址并重新发送 DCHP DESCOVER 报文
            3. 若服务器`没有`对客户端的续约请求做出`响应`，客户机会在租约时长超过`7/8 时重新发送` DCHP REQUEST请求续约，若服务器还是没有做出响应，客户机会在租约`到期之后停用`该IP地址并重新发送 DHCP DESCOVER
    2. 弃租
        1. `DHCP 客户机可随时终止租期`，这个只需要向DHCP 服务器发送 `DHCP RELEASE` （DHCP 释放）报文即可。

![](../image/Pasted%20image%2020221206160936.png)

### DHCP 中继代理

通过数据链路层的学习，我们知道了路由器可以隔绝广播域。
这就意味着一个路由器直连的网络中的主机如果想使用DHCP 功能，那么该网络内就必须配置一台DHCP 服务器。因为`客户机的 DHCP DESCOVER 广播是无法被路由器转发至其他网络的`。但是这样的成本又很高，而且实际上DHCP 的工作并不需要那么多台服务器。
在现实网络中，我们通过给路由器配置DHCP服务器的IP地址并使之成为DHCP 服务器的中继代理来解决这个问题。
![](../image/Pasted%20image%2020221206164856.png)

## 域名系统DNS

在浏览器中，我们只需要数据网站的域名就能访问对应的网站，但是结合学习的网络层的知识，跨网络的通信需要知道对方的IP 地址才能进行。在访问网络的过程中，通过域名找到对应的IP地址的功能是由 DNS 提供的。

`主机`在解析域名时，首`先`会在自身的 DNS`高速缓存表`中查找对应的 DNS记录，如果没有对应的记录就会`求助 DNS服务器`。

### DNS的架构

由于因特网中主机的数量庞大，因此如果DNS提供的是集中式的服务，那这样的域名服务器肯定会因为超负荷而无法正常工作。

早在1983年，因特网就开始采用`层次结构的命名树`作为主机的名字（即域名），并使用`分布式的域名系统DNS`。DNS使`大多数域名都在本地解析`，仅少量解析需要在因特网上通信，因此系统效率很高。

由于DNS是分布式系统，即使单个计算机出了故障，也不会妨碍整个系统的正常运行。

#### 域名的层次

* 因特网采用层次树状结构的域名结构

* 域名的结构由若干个分量组成，各分量之间用“点”隔开，分别代表不同级别的域名。
    * 每一级的域名都由英文字母和数字组成，不超过63个字符，不区分大小写字母。
    * 级别最低的域名写在最左边，而级别最高的顶级域名写在最右边。
    * 完整的域名不超过255个字符。

> [!NOTE]
>     * 例如 ： www.baidu.com 
>     * .com 是顶级域名
>     * .baidu 是在 .com 下注册的二级域名
>     * www 是百度公司自行管理的域名

* 域名系统既不规定一个域名需要包含多少个下级域名，也不规定每一级的域名代表什么意思。

* 各级域名由其上一级的域名管理机构管理，而最高的顶级域名则由因特网名称与数字地址分配机构*ICANN*进行管理。

* 顶级域名TLD(Top Level Domain）分为以下三类:
    * 国家顶级域名nTLD：采用ISO 3166的规定。如cn表示中国，us表示美国，uk表示英国、等等。
    * 通用顶级域名gTLD：最常见的通用顶级域名有七个，即：com(公司企业)、net（网络服务机构)、org(非营利性组织）、int(国际组织）、edu(美国教育结构）、gov(美国政府部门）、mil（美国军事部门）。
    * 反向域arpa：用于反向域名解析，即IP地址反向解析为域名。

* 在国家顶级域名下注册的二级域名均由该国家自行确定。例如，顶级域名为jp的日本，将其教育和企业机构的二级域名定为ac和co，而不用edu和com。
* 我国则将二级域名划分为以下两类：
    * 类别域名
        * 共七个：ac（科研机构)、com(工、商、金融等企业)、edu（教育机构）、gov(政府部门)、net(提供网络服务的机构）、mil（军事机构）和org(非营利性组织）。
    * 行政区域名
        * 共34个，适用于我国的各省、自治区、直辖市。例如：bj为北京市、sh为上海市、js为江苏省，等等。

#### 因特网的命名空间

    因特网的域名实际上是一颗倒着生长的树
![](../image/Pasted%20image%2020221206173727.png)

* 这种按等级管理的命名方法便于维护名字的唯一性，并且也容易设计出一种高效的域名查询机制。需要注意的是，域名只是个逻辑概念，并不代表计算机所在的物理地点。

#### 域名服务器

域名和IP地址的映射关系必须保存在域名服务器中，供所有其他应用查询。显然不能将所有信息都储存在一台域名服务器中。DNS使用`分布在各地的域名服务器`来实现域名到IP地址的转换。

域名服务器可以划分为以下四种不同的类型：
1. **根域名服务器**
    根域名服务器是最高层次的域名服务器。每个根域名服务器都知道所有的顶级域名服务器的域名及其IP地址。因特网上共有13个不同IP地址的根域名服务器。尽管我们将这`13个`根域名服务器中的每一个都视为单个的服务器，但“每台服务器”实际上是由许多分布在世界各地的计算机构成的`服务器群集`。当本地域名服务器向根域名服务器发出查询请求时，路由器就把查询请求报文转发到离这个DNS客户最近的一个根域名服务器。这就加快了DNS的查询过程，同时也更合理地利用了因特网的资源。根域名服务器通常`并不直接对域名进行解析，而是返回该域名所属顶级域名的顶级域名服务器的IP地址`。
2. **顶级域名服务器**
    这些域名服务器负责`管理在该顶级域名服务器注册的所有二级域名`。当收到DNS查询请求时就给出相应的回答（`可能是最后的结果，也可能是下一级权限域名服务器的IP地址`）。
3. **权限域名服务器**
    这些域名服务器负责`管理某个区的域名`。每一个主机的域名都必须在某个权限域名服务器处注册登记。因此权限域名服务器知道其管辖的域名与IP地址的映射关系。另外，权限域名服务器还知道其下级域名服务器的地址。
4. **本地域名服务器**
    本地域名服务器不属于上述的域名服务器的等级结构。当一个主机发出DNS请求报文时，这个报文就首先被送往该主机的本地域名服务器。`本地域名服务器起着代理的作用，会将该报文转发到上述的域名服务器的等级结构中`。每一个因特网服务提供者ISP，一个大学，甚至一个大学里的学院，都可以拥有一个本地域名服务器，它有时也称为`默认域名服务器`。本地域名服务器离用户较近，一般不超过几个路由器的距离，也有可能就在同一个局域网中。本地域名服务器的IP地址需要直接配置在需要域名解析的主机中。

### 域名解析的方式

DNS 报文使用运输层的 UDP 协议进行封装，运输层`端口号为 53`

域名解析分为以下两种方式：
    1. 递归查询
    2. 迭代查询

#### 递归查询

^22f5bc

![](../image/Pasted%20image%2020221206175044.png)

#### 迭代查询

    由于递归查询对于被查询的域名服务器负担太大，通常采用以下模式：从请求主机到本地域名服务器的查询是递归查询，而其余的查询是迭代查询。

![](../image/Pasted%20image%2020221206175110.png)

### DNS 高速缓存

* 为了提高DNS的查询效率，并减轻根域名服务器的负荷和减少因特网上的DNS查询报文数量，在域名服务器中广泛地使用了`高速缓存`。高速缓存用来存放最近查询过的域名以及从何处获得域名映射信息的记录。
![](../image/Pasted%20image%2020221206175356.png)

* 由于域名到IP地址的映射关系并不是永久不变，为保持高速缓存中的内容正确，域名服务器`应为每项内容设置计时器并删除超过合理时间的项`（例如，每个项目只存放两天）。

* 不但在本地域名服务器中需要高速缓存，在用户主机中也很需要。许多用户主机在启动时从本地域名服务器下载域名和IP地址的全部数据库，维护存放自己最近使用的域名的高速缓存，并且只在从缓存中找不到域名时才向域名服务器查询。同理，主机也需要保持高速缓存中内容的正确性。

## 文件传送协议 FTP

* 将某台计算机中的文件通过网络传送到可能相距很远的另一台计算机中，是一项基本的网络应用，即文件传送。

* `文件传送协议FTP`(File Transfer Protocol)是因特网上使用得最广泛的文件传送协议。
    * FTP`提供交互式的访问`，允许客户`指明文件的类型与格式`（如指明是否使用ASCII码），并允许`文件具有存取权限`（如访问文件的用户必须经过授权，并输入有效的口令）。
    * `FTP屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件`。

* 在因特网发展的早期阶段，用FTP传送文件约占整个因特网的通信量的三分之一，而由电子邮件和域名系统所产生的通信量还要小于FTP所产生的通信量。只是到了1995年，万维网WWW的通信量才首次超过了FTP。

### FTP 基本工作原理

FTP 分为两种模式：
    1. 主动模式
    2. 被动模式

![](../image/Pasted%20image%2020221206182834.png)

#### 主动模式
>由于在数据传输阶段，是服务器主动发起数据连接，因此被称为主动模式

1. ***客户端发起连接***
    1. 客户端使用临时生成的随机端口号与服务器的 21 号端口发起 TCP 连接
    2. 这个连接用于传输控制命令，因此被称为命令通道
        1. 控制连接在整个会话中会一直保持打开
2. ***有数据要传输，发起数据连接***
    1. 客户端通过命令通道告知 FTP 服务器自己临时开放的另一个随机端口号
    2. 服务器通过 TCP 20号端口主动与该端口号发起连接，建立数据通道
    3. 传输数据
        1. 服务器会在数据传输完毕后主动断开数据连接
3. ***会话结束，连接关闭***

#### 被动模式
>由于在数据传输阶段，服务器被动等待客户端发起数据连接，因此被称为被动模式

1. ***客户端发起控制连接***
    1. 客户端使用临时生成的随机端口号与服务器的 21 号端口发起 TCP 连接
    2. 这个连接用于传输控制命令，因此被称为命令通道
        1. 控制连接在整个会话中会一直保持打开
2. ***有数据要传输，发起数据连接***
    1. 有数据要传输时，客户端通过控制连接告知 FTP 服务器开启某个临时端口号被动等待客户端连接
    3. 客户端通过临时开放的随机端口号与服务端约定好的端口号建立数据连接
    4. 传输数据
        1. 服务器会在数据传输完毕后主动断开数据连接
3. ***会话结束，连接关闭***

## 电子邮件

* 电子邮件（E-mail）是因特网上`最早流行的一种应用`，并且仍然是当今因特网上最重要、最实用的应用之一。
* 传统的电话通信属于实时通信，存在以下两个缺点：
    * 电话通信的主叫和被叫双方必须同时在场;
    * 一些不是十分紧迫的电话也常常不必要地打断人们的工作或休息。

* 而电子邮件与邮政系统的寄信相似。
    * 发件人将邮件发送到自己使用的`邮件服务器`;
    * 发件人的邮件服务器将收到的邮件按其目的地址转发到收件人邮件服务器中的收件人邮箱;
    * 收件人在方便的时候访问收件人邮件服务器中自己的邮箱，获取收到的电子邮件。

* 电子邮件使用方便、传递迅速而且费用低廉。它不仅可以传送文字信息，而且还可附上声音和图像。
* 由于电子邮件的广泛使用，现在许多国家已经正式取消了电报业务。在我国，电信局的电报业务也因电子邮件的普及而濒临消失。

### 电子邮件系统组成

* 电子邮件系统采用`客户/服务器方式`。
* 电子邮件系统的三个主要组成构件：`用户代理`，`邮件服务器`，以及电子邮件所需的`协议`。
    * 用户代理是用户与电子邮件系统的接口，又称为电子邮件客户端软件。
    * 邮件服务器是电子邮件系统的基础设施。因特网上所有的ISP都有邮件服务器，其功能是发送和接收邮件，同时还要负责维护用户的邮箱。
    * 协议包括邮件发送协议（例如`SMTP`）和邮件读取协议（例如POP3,IMAP)。

![](../image/Pasted%20image%2020221206183330.png)

### SMTP 

    简单邮件传送协议SMTP(Simple Mail Transfer Protocol)

* SMTP协议只能传送ASCII码文本数据，不能传送可执行文件或其他的二进制对象。

* SMTP不能满足传送多媒体邮件（例如带有图片、音频或视频数据）的需要。并且许多其他非英语国家的文字（例如中文、俄文、甚至带有重音符号的法文或德文）也无法用SMTP传送。

* 为解决SMTP传送非ASCII码文本的问题，提出了多用途因特网邮件扩展`MIME(Multipurpose Internet Mail Extensions)`
![MIME|400](../image/Pasted%20image%2020221206184643.png)


#### 基本工作原理
![](../image/Pasted%20image%2020221206184046.png)

### 常见的邮件读取协议

常用的邮件读取协议有以下两个：
* `邮局协议POP`(**P**ost **O**ffice **P**rotocol),POP3是其第三个版本，是因特网正式标准。非常简单、功能有限的邮件读取协议。用户只能以`下载并删除方式或下载并保留方式`从邮件服务器下载邮件到用户方计算机。`不允许用户`在邮件服务器上`管理`自己的邮件。（例如创建文件夹，对邮件进行分类管理等）。
* `因特网邮件访问协议IMAP`(**I**nternet **M**essage **A**ccess **P**rotocol)，IMAP4是其第四个版本，目前还只是因特网建议标准。功能比POP3强大的邮件读取协议。`用户在自己的计算机上就可以操控邮件服务器中的邮箱`，就像在本地操控一样，因此IMAP是一个联机协议。

POP3和IMAP4都采用`基于TCP连接的客户/服务器方式`。POP3使用熟知端口110，IMAP4使用熟
知端口143。

## 万维网 WWW

* 万维网WWW(**W**orld **W**ide **W**eb)`并非某种特殊的计算机网络`。它是一个大规模的、联机式的信息储藏所,`是运行在因特网上的一个分布式应用`。

* 万维网利用网页之间的`超链接`将不同网站的网页链接成一张逻辑上的信息网。

* 万维网是欧洲粒子物理实验室的Tim Berners-Lee最初于1989年3月提出的。

* 为了方便地访问在世界范围的文档，万维网使用`统一资源定位符URL`来指明因特网上任何种类“资源”的位置。
* URL的一般形式由以下四个部分组成:
    <协议>://<主机>:<端口>/<路径>
    例如：https://www.bilibili.com:443/movie/

### HTTP

* 超文本传输协议HTTP(**H**yper **T**ext **T**ransfer **P**rotocol)
* HTTP定义了浏览器（即万维网客户进程）怎样向万维网服务器请求万维网文档，以及万维网服务器怎样把万维网文档传送给浏览器。

* HTTP 的特点：
    1.  使用 TCP 进行连接
    2.  可以同时响应多个客户端（可以同时与多个主机建立连接）
    3.  无状态
        * `服务器不维护客户端的任何信息`，即：每次请求都是独立的，服务器不存储客户端的任何历史信息
* 关于 HTTP 的无状态
    * 优点：
        1. 不需要维护历史信息（省资源）
        2. 不需要保存历史信息（省空间），因此无状态的服务支持更多终端的连接
    * 缺点：
        * 1.  服务端与客户端的信息保持同步具有不确定性，如果某一个时间段客户端或者服务器死机了，这一段时间没有同步信息，那么另一个终端持有的就是错误的（过时的）信息，总之就是维护成本很高

 #### HTTP1.0 和 HTTP 1.1 的区别
 
* HTTP/1.0采用`非持续连接`方式。在该方式下，每次浏览器要请求一个文件都要与服务器建立TCP连接,当收到响应后就立即关闭连接。
    * `每请求一个文档就要有两倍的RTT的开销`。若一个网页上有很多引用对象（例如图片等），那么请求每一个对象都需要花费2RTT的时间。
    * 为了减小时延，`浏览器通常会建立多个并行的TCP连接同时请求多个对象`。但是，这会大量占用万维网服务器的资源，特别是万维网服务器往往要同时服务于大量客户的请求，这会使其负担很重。

![](../image/Pasted%20image%2020221207022444.png)

* HTTP/1.1采用`持续连接`方式。在该方式下，万维网服务器在发送响应后仍然保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的HTTP请求报文和响应报文。这并不局限于传送同一个页面上引用的对象，而是只要这些文档都在同一个服务器上就行。
    * 为了进一步提高效率，HTTP/1.1的持续连接还可以使用`流水线`方式工作，即浏览器在收到HTTP的响应报文之前就能够连续发送多个请求报文。这样的一个接一个的请求报文到达服务器后，服务器就发回一个接一个的响应报文。这样就节省了很多个RTT时间，使TCP连接中的空闲时间减少,提高了下载文档的效率。


#### HTTP 的报文格式

* HTTP的报文格式
    HTTP是`面向文本`的，其报文中的每一个`字段`都是一些`ASCII码串`，并且每个字段的`长度`都是`不确定的`。

##### HTTP 请求报文

![](../image/Pasted%20image%2020221207023003.png)

* HTTP 支持的请求方法：
![](../image/Pasted%20image%2020221207023127.png)

* 部分常用请求头字段注解：
1.  `Accept`: text/html,application/xhtml+xml,application/xml; q=0.9,
    -   表示客户端可以接受的内容类型，多个值使用 ； 隔开
2.  `Accept-Language`: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3
    -   表示客户端可以接收的语言
3.  `User-Agent`: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Win64x64
    -   客户端的浏览器信息
4.  `Accept-Encoding`: gzip, deflate
    -   支持的压缩格式
5.  `Host`: localhost:8888
    -   访问地址
6.  `Connection`: keep-alive
    -   保持连接（持久），默认3秒
7.  `Content-Type`: application/x-www-form-urlencoded
    -   表单提交时才有可能出现,表示表单的数据类型
8.  `Content-Length`: 7
    -   请求正文的长度（单位：字节）
9.  `Upgrade-Insecure-Requests`: 1
    -   浏览器可以处理的HTTP 协议

##### HTTP 响应报文

![](../image/Pasted%20image%2020221207023304.png)

* HTTP 中的状态码
![](../image/Pasted%20image%2020221207023348.png)

* 常见响应头注解：
1.  `server`: Apache-Coyote/1.1
    -   服务器版本号
2.  `Set-Cookie`:JSESSIONID=ECA8005D1235BBB6B9CFCC338A8206FD; Path=/03test; HttpOnly
3.  `Content-Type`: text/html;charset=utf-8
    -   响应字符集,告诉浏览器以什么样的字符集解码
4.  `Content-Length`: 224
    -   响应正文的长度
5.  `Date`: Fri, 23 Jun 2017 13:45:01 GMT
    -   发送日期
6.  `Expires`: -1 `Cache-control`:no-cache `Pragma`:no-cache
    -   这三个响应头一起使用, 表示禁止浏览器缓存当前页面；每个浏览器厂商对认识的禁止头不同因此三个一起使用

### Cookies （用户-服务器状态）
>用来弥补HTTP 协议没有状态的解决方案，本质上就是存储在客户端的一小段文本
[Cookie的原理、作用，区别以及使用 - 简书 (jianshu.com)](https://www.jianshu.com/p/49077e13ea98)

#### Cookies 的工作过程
![](../image/Pasted%20image%2020221207023816.png)

### 万维网缓存与代理服务器

* 在万维网中还可以使用缓存机制以提高万维网的效率。

* 万维网缓存又称为`Web缓存`(Web Cache)，可位于客户机，也可位于中间系统上，位于中间系统上的Web缓存又称为`代理服务器`(Proxy Server)。

* Web缓存把最近的一些请求和响应暂存在本地磁盘中。`当新请求到达时，若发现这个请求与暂时存放的请求相同，就返回暂存的响应，而不需要按URL的地址再次去因特网访问该资源`。
